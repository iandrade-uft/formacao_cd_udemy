---
title: "Limpeza de Dados em R - Atividade Prática"
author: "Igo da Costa Andrade"
date: "2024-07-12"
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Problema

![](atividade.png)

## Carregamento e Visualização dos dados

```{r}
dados = read.csv("../dados/tempo.csv", sep=";", na.strings = "", stringsAsFactors = TRUE)
head(dados)
# Resumo Estatístico
summary(dados)
```


## Análise Exploratória de Dados (EDA)

* Aparência

```{r}
table(dados$Aparencia)
barplot(table(dados$Aparencia), main="Aparência")
```

* Temperatura

Resumo Estatístico


```{r}
summary(dados$Temperatura)
# Domínio
Tmin = -130
Tmax = 130
```

```{r}
hist(dados$Temperatura, main="Distribuição de dados de temperatura", xlab="Temperatura ( °F)", ylab="Frequência")
```


* Umidade

```{r}
# Resumo Estatístico
summary(dados$Umidade)
# Boxplot
boxplot(dados$Umidade, ylab="Umidade")
# Domínio
Umin = 0
Umax = 100
```

* Vento

```{r}
summary(dados$Vento)
barplot(table(dados$Vento), main="Vento", ylab="Frequência")
```


* Jogar

```{r}
summary(dados$Jogar)
barplot(table(dados$Jogar), main="Jogar", ylab="Frequência")
```

Não existem valores faltantes nem ajustes necessários para a coluna Jogar.



### Tratamento de dados

* Aparência

```{r}
# Tabela de frequências
freq_table = table(dados$Aparencia)
# Índice da tabela com maior frequência
max_idx = which.max(freq_table)
# Nome correspondente ao índice de maior frequência
max_value_name = names(freq_table)[max_idx]
max_value_name
```


```{r}
# Valores de domínio para a coluna Aparencia
dominio = c("sol", "nublado", "chuva")
# Substituição dos valores fora de domínio
dados[!dados$Aparencia %in% dominio, ]$Aparencia = max_value_name
# Ajuste 
dados$Aparencia = factor(dados$Aparencia)
# Resultado
barplot(table(dados$Aparencia), main="Aparência")

```


* Temperatura

```{r}
summary(dados$Temperatura)
# Domínio
Tmin = -130
Tmax = 130
```

Dado que os valores de domínio da Temperatura estão entre $`r Tmin`$°F e $`r Tmax`$°F, existe `r nrow(dados[dados$Temperatura < Tmin | dados$Temperatura > Tmax, ])` observações fora do domínio, conforme mostrado no boxplot abaixo:

```{r}
boxplot(dados$Temperatura)
```

Substituiremos o valor fora de domínio pela mediana dos dados de temperatura:

```{r}
dados[dados$Temperatura < Tmin | dados$Temperatura > Tmax, ]$Temperatura = median(dados$Temperatura, na.rm = TRUE)
# Resultado
boxplot(dados$Temperatura, ylab="Temperatura (°F)")
hist(dados$Temperatura, main="Distribuição de dados de Temperatura", xlab="Temperatura (°F)", ylab="Frequência")
```


* Umidade

```{r}
dados[dados$Umidade < Umin | dados$Umidade > Umax | is.na(dados$Umidade), ]$Umidade = median(dados$Umidade, na.rm = TRUE)
summary(dados$Umidade)
boxplot(dados$Umidade)
```


* Vento

Há `r nrow(dados[is.na(dados$Vento), ])` valor faltante na coluna de Vento. Vamos substituí-lo pelo valor mais frequente dessa coluna.

```{r}
# Tabela de frequências
freq_table <- table(dados$Vento)
# Índice mais frequente
idx_max <- which.max(freq_table)
# Valor do índice mais frequente
idx_max_value <- names(freq_table)[idx_max]
idx_max_value

# Substituição do valor faltante pelo valor mais frequente
dados[is.na(dados$Vento), ]$Vento = idx_max_value
# Resultado
summary(dados$Vento)
# Barplot
barplot(table(dados$Vento), main="Vento", ylab="Frequência")
```

#### Resultado final

```{r}
summary(dados)
```

